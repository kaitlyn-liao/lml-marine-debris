import{d as e}from"./defineProperty-9f9de5d0.js";import{s as t}from"./slicedToArray-c92cae3a.js";import{o as r,B as n,F as o,a as i,b as c}from"./Cell-f8de8a24.js";import{jsx as a}from"react/jsx-runtime";import*as u from"react";import{L as l,a as s,g as f,b as d,c as p}from"./HeaderCell-84a9d2c4.js";import{S as y}from"./Sort-ec20abfc.js";import{a as b,S as h}from"./modifiers-50921ac4.js";import{T as m}from"./Tree-211241b9.js";import O from"clsx";import{t as v}from"./toConsumableArray-25e5c43c.js";import{styled as w}from"@stitches/react";import{i as j}from"./Cell-57845886.js";import g from"use-double-click";var P=u.createContext(null),x=u.createContext(null),C=u.createContext(null),S=["data","theme","layout","sort","pagination","select","tree","onInit","children"];function D(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function E(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?D(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var R=u.forwardRef((function(e,n){var o=e.data,i=e.theme,c=e.layout,s=e.sort,f=e.pagination,d=e.select,p=e.tree,O=e.onInit,v=void 0===O?function(){}:O,w=e.children,j=r(e,S),g=function(e){var t=u.useRef(null);return e&&(t=e),t}(n),D=function(){var e=u.useRef(null);return e.current||(e.current={resizedLayout:[],hiddenSpacesInMemory:[]}),e}(),R=b({sort:s,pagination:f,tree:p,select:d})(o.nodes),k=function(e,r){var n=u.useState(!1),o=t(n,2),i=o[0],c=o[1];return[i,function(t){t&&(i||(c(!0),r.current=t,e(t)))}]}(v,g),B=t(k,2),N=B[0],F=B[1];return a("div",E(E({className:"table",role:"grid",ref:F},j),{},{children:N&&a(P.Provider,{value:o,children:a(x.Provider,{value:i,children:a(y.Provider,{value:s,children:a(h.Provider,{value:d,children:a(m.Provider,{value:p,children:a(C.Provider,{value:f,children:a(l,{layout:c,tableElementRef:g,tableMemoryRef:D,children:w&&w(R)},void 0)},void 0)},void 0)},void 0)},void 0)},void 0)},void 0)}),void 0)})),k=["children"];function B(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function N(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?B(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):B(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var F=function(e){var t=e.children,n=r(e,k);return a("div",N(N({className:"tbody"},n),{},{children:t}),void 0)},L=["children"];function z(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function A(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?z(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):z(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var W=function(e){var t=e.children,n=r(e,L);return a("div",A(A({role:"rowgroup",className:"thead"},n),{},{children:u.Children.map(t,(function(e){if(u.isValidElement(e))return u.cloneElement(e)}))}),void 0)};function M(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function I(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?M(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):M(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var H=function(e){return w("div",I({display:"flex",alignItems:"stretch",backgroundColor:"".concat(n)},null!=e&&e.horizontalScroll?{minWidth:"max-content"}:{}))},q=u.forwardRef((function(e,t){var r=u.useContext(s);if(!r)throw new Error("No Layout Context.");var n=function(e){return w(H(e),{fontSize:"18px",color:"".concat(o),"&:hover":{color:"".concat(i)},"&.disabled":{color:"".concat(c)},"&.clickable":{cursor:"pointer"}})}(r.layout);return a(n,I(I({},e),{},{ref:t}),void 0)})),T=u.forwardRef((function(e,t){var r=u.useContext(s);if(!r)throw new Error("No Layout Context.");var n=function(e){return w(H(e),{fontSize:"18px",color:"".concat(i)})}(r.layout);return a(n,I(I({},e),{},{ref:t}),void 0)})),V=function(e,t){var r=u.useContext(s);if(!r)throw new Error("No Layout Context.");var n=r.tableMemoryRef,o=r.layout,i=u.useRef(!1);u.useLayoutEffect((function(){i.current||(i.current=!0,Array.from(e.current.querySelectorAll(t)).forEach((function(e,t){null!==n.current.resizedLayout[t]&&e.setAttribute("style","".concat(e.getAttribute("style"))+"width: ".concat(n.current.resizedLayout[t],"; min-width: ").concat(n.current.resizedLayout[t],";"))})))}),[e,o,t,n])};function _(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function G(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?_(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var J=function(e,t){return e.reduce((function(e,r){var n=r.index,o=r.width,i=r.isHide;if(!i&&o>0)return e;if(i&&0===o)return e;var c=t.current.hiddenSpacesInMemory[n]||0,a=i?function(e,t){var r=0;return[].concat(v(t.slice(0,e.index).reverse()),v(t.slice(e.index,t.length))).map((function(t){return t.index===e.index?(r=t.width,G(G({},t),{},{width:0})):t})).map((function(t){var n=t.index!==e.index,o=0!==t.width&&!t.isHide,i=!t.isStiff;if(n&&o&&i&&r>0){var c=G(G({},t),{},{width:t.width+r});return r=0,c}return t})).sort((function(e,t){return e.index-t.index}))}(r,e):function(e,t,r){var n=[].concat(v(t.slice(0,e.index).reverse()),v(t.slice(e.index,t.length))).sort((function(e,t){return t.width-e.width})),o=t.reduce((function(e,t){return 0===t.width||t.isStiff||t.width<t.minResizeWidth?e:e+t.width-t.minResizeWidth}),0),i=r>t[e.index].minResizeWidth?r:t[e.index].minResizeWidth,c=o>i?i:o;return n.map((function(t){return t.index===e.index?G(G({},t),{},{width:c}):t})).map((function(t){var r=t.width-t.minResizeWidth,n=!t.isStiff,o=t.index!==e.index;if(0!==c&&r>0&&n&&o){var i=c>r?r:c;return c-=i,G(G({},t),{},{width:t.width-i,minWidth:t.width-i})}return t})).sort((function(e,t){return e.index-t.index}))}(r,e,c);return i?t.current.hiddenSpacesInMemory[n]=e[n].width:delete t.current.hiddenSpacesInMemory[n],a}),e)},K=function(){var e=u.useContext(s);if(!e)throw new Error("No Layout Context.");var t=e.tableElementRef,r=e.tableMemoryRef,n=e.layout;u.useLayoutEffect((function(){var e=f(t).map((function(e,t){return{index:t,minResizeWidth:+e.getAttribute("data-resize-min-width"),width:e.getBoundingClientRect().width,isStiff:e.classList.contains("stiff"),isHide:((null==n?void 0:n.hiddenColumns)||[]).includes(e.getAttribute("data-cell-key"))}})),o=J(e,r);r.current.resizedLayout=function(e,t,r){var n=t.current.querySelector(".thead"),o=(null==n?void 0:n.getBoundingClientRect().width)||0,i=e.map((function(e){var t=e.width,n=t/o*100;return e.isStiff||null!=r&&r.horizontalScroll?"".concat(t,"px"):"".concat(n,"%")})),c=function(e,t){e.style.width=i[t],e.style.minWidth=i[t]};d(t,c),p(t,c);var a=function(t,r){e[r].isHide&&0===e[r].width?t.classList.add("hide"):t.classList.remove("hide")};return d(t,a),p(t,a),i}(o,t,n)}),[t,r,n])},Q=["className","children"];function U(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function X(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?U(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):U(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Y=function(e){var t=e.className,n=e.children,o=r(e,Q),i=u.useRef(null);return function(e,t){var r=u.useContext(s);if(!r)throw new Error("No Layout Context.");var n=r.tableMemoryRef,o=r.layout;u.useLayoutEffect((function(){var r=Array.from(e.current.querySelectorAll(t)),i=Array.from(e.current.querySelectorAll("".concat(t,".stiff"))),c=i.reduce((function(e,t){return e+t.getBoundingClientRect().width}),0),a=Array.from(e.current.querySelectorAll("".concat(t,":not(.stiff)")));n.current.resizedLayout=r.map((function(e,t){var r;if(null!==(r=n.current.resizedLayout)&&void 0!==r&&r[t])return n.current.resizedLayout[t];if(i.includes(e))return"".concat(e.getBoundingClientRect().width,"px");if(null==o||!o.custom){var u=100/a.length,l=c/a.length;return 0===l?"".concat(u,"%"):"calc(".concat(u,"% - ").concat(l,"px)")}return null}))}),[o,e,t,n])}(i,".th"),V(i,".th"),K(),V(i,".th"),a(T,X(X({role:"rowheader",className:O("tr","tr-header",t),ref:i},o),{},{children:u.Children.toArray(n).filter(Boolean).map((function(e,t){if(u.isValidElement(e)){var r={};return((n=e).type?n.type===u.Fragment:n===u.Fragment)||(r=X(X({},r),{},{index:t})),u.cloneElement(e,r)}var n}))}),void 0)},Z=function(){},$=["item","className","disabled","onClick","onDoubleClick","children"];function ee(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function te(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?ee(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ee(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var re=function(e){var t=e.item,n=e.className,o=e.disabled,i=e.onClick,c=e.onDoubleClick,l=e.children,s=r(e,$),f=function(e,t){return Object.values(e).filter(Boolean).filter((function(e){return null==e?void 0:e.hasOwnProperty("_getRowProps")})).map((function(r){return r._getRowProps(t,e)}))}({select:u.useContext(h),tree:u.useContext(m),sort:u.useContext(y),pagination:u.useContext(C)},e),d=function(e,t){var r=e.reduce((function(e,t){var r=t.theme,n=t.className,o=t.onClick,i="\n        ".concat(e.themeByFeature,"\n        ").concat(r,"\n      "),c=O(e.classNamesByFeature,n);return te(te({},e),{},{themeByFeature:i,classNamesByFeature:c,onClickByFeature:function(t,r){o(t,r),e.onClickByFeature(t,r)}})}),{themeByFeature:"",classNamesByFeature:"",onClickByFeature:function(e,r){t&&j(r)&&t(e,r)}});return{themeByFeature:r.themeByFeature,classNamesByFeature:r.classNamesByFeature,onClickByFeature:r.onClickByFeature}}(f,i),p=d.classNamesByFeature,b=d.onClickByFeature,v=u.useRef(null);return function(e,t,r,n){g({onSingleClick:t?function(e){return t(n,e)}:Z,onDoubleClick:r?function(e){return r(n,e)}:Z,latency:r?250:0,ref:e})}(v,b,c,t),V(v,".td"),a(q,te(te({},s),{},{role:"row",className:O("tr","tr-body",p,n,{disabled:o,clickable:b||c}),ref:v,children:l}),void 0)};export{F as B,W as H,re as R,R as T,Y as a};
//# sourceMappingURL=Row-15ce6d36.js.map
