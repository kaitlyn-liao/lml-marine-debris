import{d as e}from"./defineProperty-9f9de5d0.js";import{o as t,H as r}from"./Cell-f8de8a24.js";import{jsx as n,jsxs as o}from"react/jsx-runtime";import*as i from"react";import u from"clsx";import{styled as c}from"@stitches/react";import{t as a}from"./toConsumableArray-25e5c43c.js";var l=i.createContext(null),s=function(e){var t=e.tableElementRef,r=e.tableMemoryRef,o=e.layout,u=e.children,c=i.useMemo((function(){return{layout:o,tableElementRef:t,tableMemoryRef:r}}),[o,t,r]);return n(l.Provider,{value:c,children:u},void 0)},f=function(e){var t=e.current.querySelector(".tr-header");return Array.from((null==t?void 0:t.querySelectorAll(".th"))||[])},d=function(e,t){var r=f(e),n=r.length;r.forEach((function(e,r){return t(e,r,n)}))},m=function(e,t){return Array.from(e.current.querySelectorAll(".tr-body")).forEach((function(e){var r=Array.from(e.querySelectorAll(".td")),n=r.length;r.forEach((function(e,r){return t(e,r,n)}))}))},h=function(e,t){var r=i.useContext(l);if(!r)throw new Error("No Layout Context.");var n=r.tableMemoryRef,o=r.tableElementRef,u=r.layout,c=i.useRef(null),s=i.useRef(null),h=i.useRef(!1),p=i.useCallback((function(t){t.preventDefault(),h.current=!0,s.current=e.current.offsetWidth-t.pageX}),[e]),v=i.useCallback((function(e){if(h.current){e.preventDefault();var r=s.current+e.pageX;n.current.resizedLayout=function(e,t,r,n){var o=f(t).map((function(e,t){return{index:t,minResizeWidth:+e.getAttribute("data-resize-min-width"),width:e.getBoundingClientRect().width,isStiff:e.classList.contains("stiff")}})),i=o.reduce((function(t,r,n){return t||(n>e&&0!==r.width?r:t)}),null),u=t.current.querySelector(".thead"),c=(null==u?void 0:u.getBoundingClientRect().width)||0,l=o[e].minResizeWidth,s=n>l?n:l,h=s-o[e].width,p=o.map((function(t,r){if(i&&e===r)return i.width-h>l?s:t.width;if((null==i?void 0:i.index)===r){var n=t.width-h;return n>l?n:t.width}return t.width})),v=o.map((function(e,t){var n=p[t],o=n/c*100;return e.isStiff||null!=r&&r.horizontalScroll?"".concat(n,"px"):"".concat(o,"%")})),y=function(e,t){e.style.width=v[t],e.style.minWidth=v[t]},b=function(e,t){if(a(Array.from(e.classList)).includes("pin")){var r=p.reduce((function(e,r,n){return n>=t?e:e+r}),0);e.style.left="".concat(r,"px")}};return d(t,y),m(t,y),d(t,b),m(t,b),v}(t,o,u,r)}}),[t,u,o,n]),y=i.useCallback((function(){h.current=!1}),[]);return i.useEffect((function(){var e=c.current;return e&&(e.addEventListener("mousedown",p),document.addEventListener("mousemove",v),document.addEventListener("mouseup",y)),function(){e&&(e.removeEventListener("mousedown",p),document.removeEventListener("mousemove",v),document.removeEventListener("mouseup",y))}}),[p,v,y]),{resizeRef:c}},p=["index","hideKey","className","hide","pin","stiff","resize","children"];function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?v(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var b=function(e){var a=e.index,l=e.hideKey,s=e.className;e.hide;var f=e.pin,d=e.stiff,m=e.resize,v=e.children,b=t(e,p),g=i.useRef(null),w=h(g,a).resizeRef,z=m?function(e){var t="boolean"==typeof e||null==(null==e?void 0:e.resizerWidth)?3:e.resizerWidth,r="boolean"==typeof e||null==(null==e?void 0:e.resizerHighlight)?"transparent":e.resizerHighlight;return c("span",{zIndex:1,position:"absolute",top:0,right:0,bottom:0,cursor:"col-resize",width:"".concat(t,"px"),backgroundColor:"transparent",transition:"background-color 0.1s linear","&:hover":{backgroundColor:"".concat(r)}})}(m):function(){return null};return o(r,y(y({},b),{},{role:"columnheader","data-cell-key":l||a,"data-resize-min-width":"boolean"==typeof m||null==(null==m?void 0:m.minWidth)?75:m.minWidth,className:u("th",s,{stiff:d,resize:m,pin:f}),ref:g,children:[n("div",{children:v},void 0),m&&n(z,{ref:w},void 0)]}),void 0)};export{b as H,s as L,l as a,d as b,m as c,f as g};
//# sourceMappingURL=HeaderCell-84a9d2c4.js.map
